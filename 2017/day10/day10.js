var input = [97,167,54,178,2,11,209,174,119,248,254,0,255,1,64,190];
var inputStr = '97,167,54,178,2,11,209,174,119,248,254,0,255,1,64,190';

var elements = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255];
//helper to create 256 elems
function createElem(){
	var arr = [];
	for(var i = 0; i <=255; i++){
		arr.push(i);
	}
	return arr;
}

function knoting(elems, inp){
	var cur_pos = 0;
	var skip_size = 0;
	var n = elems.length;
	var start;

	for (var i = 1; i <= 64; i++){

		inp.map(function(length, index){
			start = cur_pos % n;
			elems = elems.rotate(start);
			
			var t = elems.splice(0, length);
			t.reverse();
			elems = t.concat(elems);
			elems = elems.rotate(-start);

			cur_pos = cur_pos + length + skip_size;
			skip_size += 1;
		})

	}

	//return elems[0]*elems[1]; //первая звезда
	return elems;
}

//helper to rotate arrays
Array.prototype.rotate = function(n) {
  return this.slice(n, this.length).concat(this.slice(0, n));
}

function getAscii(str){
	var res = [];
	for(var i = 0; i < str.length; i++) {
		res.push(str.charCodeAt(i));
	}
	return res;
};

function getDenseObj(arr){
	var denseObj = {};
	for (var j = 1; j <= 16; j++) {
		var res = [];
		for(var i = 16*(j-1); i <= 255; i++){
			if( i < 16*j){
				res.push(arr[i]);
				denseObj[j] = res;
			}
		}
	}

	return denseObj;
}

function getDenseHash(obj){
	var res = [];
	for(var key in obj){
		var arr = obj[key];
		var hash = arr.reduce(function(xor, current){
			return xor ^ current;
		});
		res.push(hash);
	}
	return res;
}

//result of getAscii() + suffix = 17, 31, 73, 47, 23
var asciiStr = [57, 55, 44, 49, 54, 55, 44, 53, 52, 44, 49, 55, 56, 44, 50, 44, 49, 49, 44, 50, 48, 57, 44, 49, 55, 52, 44, 49, 49, 57, 44, 50, 52, 56, 44, 50, 53, 52, 44, 48, 44, 50, 53, 53, 44, 49, 44, 54, 52, 44, 49, 57, 48, 17, 31, 73, 47, 23];

//result of knoting(elements, asciiStr)
var sparse_hash = [128, 8, 0, 225, 59, 13, 127, 253, 100, 224, 188, 218, 153, 239, 58, 220, 159, 163, 111, 2, 23, 237, 54, 182, 228, 56, 50, 61, 75, 99, 34, 7, 76, 168, 53, 192, 216, 57, 176, 204, 105, 21, 52, 132, 198, 244, 62, 223, 19, 90, 67, 136, 174, 33, 246, 72, 141, 139, 249, 133, 179, 121, 35, 89, 155, 4, 241, 3, 181, 187, 146, 254, 27, 173, 236, 81, 66, 71, 135, 255, 217, 91, 211, 191, 30, 183, 193, 154, 202, 87, 138, 80, 250, 114, 15, 85, 64, 206, 190, 203, 208, 120, 170, 109, 164, 129, 26, 107, 98, 110, 102, 124, 77, 25, 9, 147, 51, 166, 86, 240, 39, 45, 185, 160, 92, 189, 74, 32, 145, 143, 126, 200, 55, 222, 73, 36, 63, 10, 103, 214, 245, 95, 226, 212, 178, 49, 83, 231, 151, 65, 169, 12, 161, 196, 162, 101, 156, 149, 41, 88, 180, 195, 96, 20, 78, 140, 118, 108, 199, 122, 205, 31, 5, 201, 68, 194, 37, 233, 40, 157, 116, 172, 43, 113, 123, 106, 79, 115, 6, 84, 232, 125, 221, 148, 235, 29, 213, 119, 18, 234, 134, 44, 242, 177, 17, 215, 16, 97, 150, 243, 70, 167, 171, 48, 14, 130, 112, 117, 165, 94, 142, 209, 158, 227, 38, 131, 144, 238, 230, 42, 252, 11, 104, 47, 248, 210, 69, 219, 82, 152, 207, 28, 251, 93, 186, 184, 22, 60, 137, 229, 1, 247, 24, 175, 46, 197];

var dense_obj = getDenseObj(sparse_hash);
var dense_hash = getDenseHash(dense_obj);

function getKnotHash(arr){
	return arr.map(function(item){
		return item.toString(16);
	}).join('');
}
// result getDenseHash =[175, 245, 147, 121, 121, 137, 214, 101, 52, 158, 254, 17, 187, 79, 217, 155]

console.log(getKnotHash(dense_hash)); //вторая звезда // aff593797989d665349efe11bb4fd99b

